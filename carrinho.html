<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sacola - Beka do Torcedor | Loja Virtual Design</title>
    <link rel="shortcut icon" type="image/jpg" href="./images/favicon.png" />
    <link rel="stylesheet" href="./css/style.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <script src="https://kit.fontawesome.com/d652b9f554.js" crossorigin="anonymous"></script>
    <style>
        .checkout-btn {
            text-align: right;
            margin-top: 30px;
        }

        .checkout-btn .btn {
            background: #ff523b;
            color: white;
            padding: 12px 30px;
            border-radius: 30px;
            border: none;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.5s;
            text-decoration: none;
            display: inline-block;
        }

        .checkout-btn .btn:hover {
            background: #563434;
        }

        @media only screen and (max-width: 600px) {
            .checkout-btn .btn {
                display: block;
                width: 100%;
                text-align: center;
            }
        }

        .cart-info img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            margin-right: 15px;
        }

        .cart-info {
            display: flex;
            align-items: center;
        }

        .cart-page table {
            width: 100%;
            border-collapse: collapse;
        }

        .cart-page table th {
            text-align: left;
            padding: 10px;
            background: #f5f5f5;
        }

        .cart-page table td {
            padding: 15px 10px;
            border-bottom: 1px solid #ddd;
        }

        .cart-page table input[type="number"] {
            width: 60px;
            padding: 8px;
            border: 1px solid #ddd;
        }

        .total-price table {
            width: 100%;
            max-width: 400px;
            float: right;
            border-top: 3px solid #ff523b;
        }

        .total-price table td {
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }

        .total-price table tr:last-child td {
            font-weight: bold;
            font-size: 18px;
        }
    </style>
</head>

<body>

    <div class="container">
        <div class="navbar">
            <div class="logo">
                <a href="index.html">
                    <img src="./images/logo.10.png" width="125px" alt="Logo da loja">
                </a>
            </div>
            <nav>
                <ul id="MenuItems">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="produtos.html">Produtos</a></li>
                    <li><a href="#">Sobre</a></li>
                    <li><a href="#">Contato</a></li>
                </ul>
            </nav>
            <a href="carrinho.html">
                <img src="./images/cart.png" width="30px" height="30px">
                <span id="cart-count">0</span>
            </a>
            <img src="./images/menu.png" class="menu-icon" onclick="menutoggle()">
        </div>
    </div>

    <!-- Item na Sacola -->
    <div class="small-container cart-page">
        <table id="cart-table">
            <tr>
                <th>Produto</th>
                <th>Quantidade</th>
                <th>Total</th>
            </tr>
            <!-- Itens do carrinho serão adicionados aqui via JavaScript -->
        </table>

        <div class="total-price">
            <table>
                <tr>
                    <td>Subtotal</td>
                    <td id="subtotal">R$0.00</td>
                </tr>
                <tr>
                    <td>Frete</td>
                    <td id="frete">R$0.00</td>
                </tr>
                <tr>
                    <td>Total</td>
                    <td id="total">R$0.00</td>
                </tr>
            </table>
        </div>

        <div class="checkout-btn">
            <a href="#" class="btn" id="checkout-btn">Finalizar Compra</a>
        </div>
    </div>

    <!-------- Footer ------>
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="footer-col-1">
                    <h3>Baixe nosso App</h3>
                    <p>disponível para Android e iOS</p>
                    <div class="app-logo">
                        <img src="./images/play-store.png">
                        <img src="./images/app-store.png">
                    </div>
                </div>
                <div class="footer-col-2">
                    <img src="./images/logo.10.png">
                    <p>Nosso objetivo é tornar o prazer e os benefícios do esporte acessíveis a todos de uma maneira
                        sustentável</p>
                </div>
                <div class="footer-col-3">
                    <h3>Links Úteis</h3>
                    <ul>
                        <li>Cupons</li>
                        <li>Blog</li>
                        <li>Política de Reembolso</li>
                        <li>Afiliados</li>
                    </ul>
                </div>
                <div class="footer-col-4">
                    <h3>Redes Sociais</h3>
                    <ul>
                        <li>Facebook</li>
                        <li>Twitter</li>
                        <li>Instagram</li>
                        <li>Youtube</li>
                    </ul>
                </div>
            </div>
            <hr>
            <p class="copyright">Copyright 2025 - </p>
        </div>
    </div>

    <script>
        // Carrinho de compras
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        
        // Produtos disponíveis (normalmente viriam de um banco de dados)
        const products = {
            'prod1': {
                id: 'prod1',
                name: '',
                price: 0.00,
                image: './images/00021.jpg'
            },
            'prod2': {
                id: '',
                name: '',
                price: 0.00,
                image: ''
            },
            'prod3': {
                id: 'prod3',
                name: '',
                price: 0.00,
                image: ''
            }
        };

        // Atualiza o carrinho na tela
        function updateCartDisplay() {
            const cartTable = document.getElementById('cart-table');
            // Limpa a tabela, mantendo apenas o cabeçalho
            while (cartTable.rows.length > 1) {
                cartTable.deleteRow(1);
            }

            let subtotal = 0;
            
            // Adiciona cada item do carrinho na tabela
            cart.forEach(item => {
                const product = products[item.id];
                const row = cartTable.insertRow();
                
                // Célula do produto
                const productCell = row.insertCell(0);
                productCell.innerHTML = `
                    <div class="cart-info">
                        <img src="${product.image}">
                        <div>
                            <p>${product.name}</p>
                            <small>Preço: R$${product.price.toFixed(2)}</small>
                            <br>
                            <a href="#" onclick="removeFromCart('${item.id}')">Remover</a>
                        </div>
                    </div>
                `;
                
                // Célula da quantidade
                const quantityCell = row.insertCell(1);
                quantityCell.innerHTML = `<input type="number" value="${item.quantity}" min="1" 
                    onchange="updateQuantity('${item.id}', this.value)">`;
                
                // Célula do total
                const totalCell = row.insertCell(2);
                const itemTotal = product.price * item.quantity;
                totalCell.textContent = `R$${itemTotal.toFixed(2)}`;
                
                subtotal += itemTotal;
            });

            // Atualiza totais
            document.getElementById('subtotal').textContent = `R$${subtotal.toFixed(2)}`;
            
            // Calcula frete (exemplo: frete grátis para compras acima de R$250)
            const shipping = subtotal > 250 ? 0 : 35;
            document.getElementById('frete').textContent = `R$${shipping.toFixed(2)}`;
            
            // Calcula total geral
            const total = subtotal + shipping;
            document.getElementById('total').textContent = `R$${total.toFixed(2)}`;
            
            // Atualiza contador do carrinho
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cart-count').textContent = totalItems;
        }

        // Adiciona produto ao carrinho (pode ser chamado de outras páginas)
        function addToCart(productId, quantity = 1) {
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({ id: productId, quantity });
            }
            
            saveCart();
            updateCartDisplay();
        }

        // Remove produto do carrinho
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            saveCart();
            updateCartDisplay();
        }

        // Atualiza quantidade de um produto
        function updateQuantity(productId, newQuantity) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity = parseInt(newQuantity);
                saveCart();
                updateCartDisplay();
            }
        }

        // Salva carrinho no localStorage
        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        // Finalizar compra
        document.getElementById('checkout-btn').addEventListener('click', function(e) {
            e.preventDefault();
            if (cart.length === 0) {
                alert('Seu carrinho está vazio!');
                return;
            }
            alert('Compra finalizada com sucesso! Obrigado por sua compra.');
            cart = [];
            saveCart();
            updateCartDisplay();
        });

        // Inicializa o carrinho
        document.addEventListener('DOMContentLoaded', function() {
            // Se o carrinho estiver vazio, adiciona alguns itens de exemplo
            if (cart.length === 0) {
                addToCart('prod1', 1);
                addToCart('prod2', 1);
                addToCart('prod3', 1);
            } else {
                updateCartDisplay();
            }
        });
        
    </script>
</body>
</html>